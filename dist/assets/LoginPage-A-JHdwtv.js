import{u as x,a as e,j as a,F as h,s as I}from"./index-BP8PmJG4.js";import{r as l,u as L,L as y}from"./react-vendor-DqtZkGaG.js";/* empty css                  */import"./supabase-ulL4C6uA.js";const $=()=>{const[i,C]=l.useState({email:"",password:""}),[n,o]=l.useState({}),[t,u]=l.useState(!1),[E,f]=l.useState(!1),[d,v]=l.useState(""),[g,b]=l.useState(!1),[N,m]=l.useState(""),{signIn:k}=x(),F=L(),w=r=>{const{name:s,value:c}=r.target;C(p=>({...p,[s]:c})),n[s]&&o(p=>({...p,[s]:""}))},R=()=>{const r={};return i.email?/\S+@\S+\.\S+/.test(i.email)||(r.email="email invalido"):r.email="email requerido",i.password||(r.password="Contraseña requerida"),o(r),Object.keys(r).length===0},P=async r=>{if(r.preventDefault(),!!R()){u(!0),o({});try{const{data:s,error:c}=await k(i.email,i.password);if(c){c.message.includes("Credencial de inicio de sesión no válidas")?o({general:"Correo electrónico o contraseña no válidos"}):c.message.includes("Correo electrónico no confirmado")?o({general:"Por favor revise su correo electrónico y confirme su cuenta antes de iniciar sesión."}):o({general:c.message});return}F("/emotional-setup")}catch{o({general:"Se produjo un error inesperado. Inténtalo de nuevo."})}finally{u(!1)}}},j=async r=>{if(r.preventDefault(),!d){m("Por favor ingrese su correo electrónico");return}if(!/\S+@\S+\.\S+/.test(d)){m("Por favor ingrese un correo electrónico válido");return}m(""),u(!0);try{const{error:s}=await I.auth.resetPasswordForEmail(d,{redirectTo:`${window.location.origin}/reset-password`});if(s)throw s;b(!0)}catch(s){m(s.message||"Ocurrió un error al enviar el correo de recuperación. Por favor, inténtalo de nuevo.")}finally{u(!1)}},S=()=>{f(!1),v(""),m(""),b(!1)};return e("div",{className:"auth-page",children:e("div",{className:"auth-container",children:E?a(h,{children:[a("div",{className:"auth-header",children:[e("button",{type:"button",className:"back-link",onClick:S,children:"← Volver al inicio de sesión"}),e("h1",{className:"auth-title",children:"Recuperar contraseña"}),e("p",{className:"auth-subtitle",children:g?"Revisa tu correo electrónico para restablecer tu contraseña.":"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),g?a("div",{className:"text-center",children:[a("div",{className:"success-message",children:[a("p",{children:["Hemos enviado un correo a ",e("strong",{children:d})," con instrucciones para restablecer tu contraseña."]}),e("p",{children:"Si no ves el correo, revisa tu carpeta de spam."})]}),e("button",{className:"btn btn-secondary mt-4",onClick:S,children:"Volver al inicio de sesión"})]}):a("form",{className:"auth-form",onSubmit:j,children:[N&&e("div",{className:"error-message",children:N}),a("div",{className:"form-group",children:[e("label",{htmlFor:"reset-email",className:"form-label",children:"Correo electrónico"}),e("input",{type:"email",id:"reset-email",value:d,onChange:r=>v(r.target.value),className:"form-input",placeholder:"tucorreo@ejemplo.com",disabled:t,required:!0})]}),e("button",{type:"submit",className:"btn btn-primary btn-full",disabled:t,children:t?a(h,{children:[e("span",{className:"loading-spinner"}),"Enviando..."]}):"Enviar enlace de recuperación"})]})]}):a(h,{children:[a("div",{className:"auth-header",children:[e(y,{to:"/",className:"back-link",children:"← Volver a la página de inicio"}),e("h1",{className:"auth-title",children:"Bienvenido de nuevo"}),e("p",{className:"auth-subtitle",children:"Inicie sesión en su cuenta de Cozy Hours"})]}),a("form",{className:"auth-form",onSubmit:P,children:[n.general&&e("div",{className:"error-message",children:n.general}),a("div",{className:"form-group",children:[e("label",{htmlFor:"email",className:"form-label",children:"Email"}),e("input",{type:"email",id:"email",name:"email",value:i.email,onChange:w,className:`form-input ${n.email?"error":""}`,placeholder:"Escribe tu email",disabled:t}),n.email&&e("span",{className:"field-error",children:n.email})]}),a("div",{className:"form-group",children:[e("label",{htmlFor:"password",className:"form-label",children:"Contraseña"}),e("input",{type:"password",id:"password",name:"password",value:i.password,onChange:w,className:`form-input ${n.password?"error":""}`,placeholder:"Escribe tu contraseña",disabled:t}),n.password&&e("span",{className:"field-error",children:n.password})]}),e("div",{className:"form-group text-right",children:e("button",{type:"button",className:"forgot-password-link",onClick:()=>f(!0),disabled:t,children:"¿Olvidaste tu contraseña?"})}),e("button",{type:"submit",className:"btn btn-primary btn-full",disabled:t,children:t?a(h,{children:[e("span",{className:"loading-spinner"}),"Iniciar sesión..."]}):"Iniciar sesión"})]}),e("div",{className:"auth-footer",children:a("p",{children:["¿No tienes una cuenta?"," ",e(y,{to:"/register",className:"auth-link",children:"Regístrate aquí"})]})})]})})})};export{$ as default};
//# sourceMappingURL=LoginPage-A-JHdwtv.js.map
