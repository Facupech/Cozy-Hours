import{b as W,j as a,a as e,F as se,u as oe,e as pe,f as he,h as J,i as ge,k as ve,l as fe,g as be}from"./index-BP8PmJG4.js";import{r as p,f as L,u as Ne}from"./react-vendor-DqtZkGaG.js";import{A as ye,D as ke}from"./DesktopManager-Bis_dNX3.js";import"./supabase-ulL4C6uA.js";const H={happy:[{id:"happy-1",name:"Planicie Soleada",url:"https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80",type:"image",premium:!1},{id:"happy-2",name:"Amanecer Radiante",url:"https://images.unsplash.com/photo-1693552067222-0e2ef8ed06b0?w=1600&auto=format&fit=crop&q=80",type:"image",premium:!0},{id:"happy-video-1",name:"Flores Floreciendo",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/happy-video-1.mp4",type:"video",premium:!0,description:"Time-lapse de flores creciendo en un campo soleado"},{id:"happy-video-2",name:"Girasoles Danzando",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/happy-video-2.mp4",type:"video",premium:!0,description:"Girasoles animados balanceándose con la brisa"}],focused:[{id:"focused-1",name:"Profundidades del Océano",url:"https://images.pexels.com/photos/15591206/pexels-photo-15591206.jpeg",type:"image",premium:!1},{id:"focused-video-1",name:"Río Fluyendo",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/focused-video-1.mp4",type:"video",premium:!0,description:"Río fluyendo a través de un bosque"},{id:"focused-video-2",name:"Pescando en el Océano",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/focused-video-2.mp4",type:"video",premium:!0,description:"Barco pescando en océano sereno"},{id:"focused-video-3",name:"Lluvia en Ventana",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/focused-video-3.mp4",type:"video",premium:!0,description:"Gotas de agua deslizándose por una ventana con luces de ciudad desenfocadas"}],relaxed:[{id:"relaxed-1",name:"Brisa de Bosque",url:"https://images.unsplash.com/photo-1448375240586-882707db888b?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80",type:"image",premium:!1},{id:"relaxed-video-1",name:"Árboles Meciéndose",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/relaxed-video-1.mp4",type:"video",premium:!0,description:"Árboles meciéndose suavemente en un día lluvioso y nublado"},{id:"relaxed-video-2",name:"Nubes Flotantes",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/relaxed-video-2.mp4",type:"video",premium:!0,description:"Nubes flotando en un cielo sereno"},{id:"relaxed-video-3",name:"Olas de Playa",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/relaxed-video-3.mp4",type:"video",premium:!0,description:"Olas suaves rompiendo en una playa tranquila al atardecer"}],energetic:[{id:"energetic-1",name:"Estallido de Lava",url:"https://cdn.pixabay.com/photo/2022/08/19/09/05/volcano-7396466_1280.jpg",type:"image",premium:!1},{id:"energetic-video-1",name:"Tormenta Eléctrica",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/energetic-video-1.mp4",type:"video",premium:!0,description:"Tormenta eléctrica en una ciudad de noche"},{id:"energetic-video-2",name:"Energía Pulsante",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/energetic-video-2.mp4",type:"video",premium:!0,description:"Energía vibrante con colores eléctricos"},{id:"energetic-video-3",name:"Tráfico en Ciudad",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/energetic-video-3.mp4",type:"video",premium:!0,description:"Tráfico lento en una ciudad atardeciente"}],creative:[{id:"creative-1",name:"Prado en Alturas",url:"https://cdn.pixabay.com/photo/2019/03/11/22/47/kamchatka-4049692_1280.jpg",type:"image",premium:!1},{id:"creative-video-1",name:"Aurora Boreal",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/creative-video-1.mp4",type:"video",premium:!0,description:"Aurora boreal bailando en el cielo nocturno"},{id:"creative-video-2",name:"Explosión de Colores",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/creative-video-2.mp4",type:"video",premium:!0,description:"Colores vibrantes explotando y mezclándose en patrones artísticos"},{id:"creative-video-3",name:"Tinta en Agua",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers//creative-video-3.mp4",type:"video",premium:!0,description:"Tinta naranja en agua creando arte fluido"}],calm:[{id:"calm-1",name:"Aguas Pacíficas",url:"https://images.unsplash.com/photo-1439066615861-d1af74d74000?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80",type:"image",premium:!1},{id:"calm-video-1",name:"Niebla y Montaña",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/calm-video-1.mp4",type:"video",premium:!0,description:"Niebla serena y una montaña al fondo con un cielo azul"},{id:"calm-video-2",name:"Jardín Zen",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/calm-video-2.mp4",type:"video",premium:!0,description:"Pacífico jardín Zen con suaves caídas de hojas de cerezo"},{id:"calm-video-3",name:"Espacio de Meditación",url:"https://zegbjygxmtsybxnqayoj.supabase.co/storage/v1/object/public/wallpapers/calm-video-3.mp4",type:"video",premium:!0,description:"Espacio de meditación tranquilo con suave luz de velas e incienso"}]},re=(t,s)=>{const{isPremium:i}=W(),r=i(),[l,c]=p.useState(0),[u,g]=p.useState(!0),[o,N]=p.useState(3e4),b=v=>{const n=H[v]||H.happy;return r?n:n.filter(m=>!m.premium)},w=()=>{const v=b(t);return v.length===0?null:v[l%v.length]},j=()=>{const v=b(t);v.length>1&&c(n=>(n+1)%v.length)},x=v=>{const m=b(t).findIndex(C=>C.id===v);m!==-1&&c(m)};return p.useEffect(()=>{if(!u||b(t).length<=1)return;const n=setInterval(()=>{j()},o);return()=>clearInterval(n)},[u,o,t,r]),p.useEffect(()=>{const v=w();v&&s&&s(v)},[l,t,r]),p.useEffect(()=>{c(0)},[t]),{currentWallpaper:w(),availableWallpapers:b(t),allWallpapers:H[t]||H.happy,rotationEnabled:u,rotationInterval:o,setRotationEnabled:g,setRotationInterval:N,nextWallpaper:j,selectWallpaper:x,currentWallpaperIndex:l}},we=({showTitle:t=!0})=>{const{subscription:s,isPremium:i,upgradeToPremium:r,downgradeToFree:l}=W(),c=u=>{u==="premium"&&!i()?r():u==="free"&&i()&&l()};return a("div",{className:"plan-selector",children:[t&&e("h3",{className:"plan-selector-title",children:"Escoger tu plan"}),a("div",{className:"plan-options",children:[a("div",{className:`plan-option ${i()?"":"activo"}`,onClick:()=>c("free"),children:[a("div",{className:"plan-header",children:[e("span",{className:"plan-icon",children:"🆓"}),e("h4",{className:"plan-name",children:"Gratuito"}),e("span",{className:"plan-price",children:"$0/mes"})]}),a("div",{className:"plan-features",children:[e("div",{className:"feature",children:"✅ Espacio de escritorio emocional básico"}),e("div",{className:"feature",children:"✅ Colección de música estándar"}),e("div",{className:"feature",children:"✅ Fondos de pantalla básicos"}),e("div",{className:"feature-limited",children:"📝 Hasta 5 notas"}),e("div",{className:"feature-limited",children:"✅ Hasta 10 tareas"}),e("div",{className:"feature-limited",children:"🖥️ Hasta 3 escritorios"})]}),!i()&&e("div",{className:"current-plan",children:"Plan actual"})]}),a("div",{className:`plan-option premium ${i()?"activo":""}`,onClick:()=>c("premium"),children:[a("div",{className:"plan-header",children:[e("span",{className:"plan-icon",children:"👑"}),e("h4",{className:"plan-name",children:"Premium"}),e("span",{className:"plan-price",children:"$4.99/mes"})]}),a("div",{className:"plan-features",children:[e("div",{className:"feature",children:"✨ Todo del plan gratuito"}),e("div",{className:"feature premium-feature",children:"🎵 Música premium exclusiva"}),e("div",{className:"feature premium-feature",children:"🎨 Fondos de pantalla premium"}),e("div",{className:"feature premium-feature",children:"⚙️ Customización avanzada"}),e("div",{className:"feature premium-feature",children:"📝 Notas ilimitadas"}),e("div",{className:"feature premium-feature",children:"✅ Tareas ilimitadas"}),e("div",{className:"feature premium-feature",children:"🖥️ Escritorios ilimitados"}),e("div",{className:"feature premium-feature",children:"🎯 Soporte prioritario"})]}),i()&&e("div",{className:"current-plan premium",children:"Plan actual"}),!i()&&e("div",{className:"upgrade-badge",children:"Más popular"})]})]}),e("div",{className:"plan-note",children:e("p",{children:"💡 Cambia de plan en cualquier momento. ¡Las funciones Premium se activan instantáneamente!"})})]})},xe={happy:{name:"Feliz",emoji:"😊"},focused:{name:"Concentrado",emoji:"🎯"},relaxed:{name:"Relajado",emoji:"😌"},energetic:{name:"Energético",emoji:"⚡"},creative:{name:"Creativo",emoji:"🎨"},calm:{name:"Calmado",emoji:"🧘"}},le=({wallpaperSystem:t,emotionalState:s,onClose:i,isDesktopMode:r=!1})=>{var A;const{isPremium:l,upgradeToPremium:c}=W(),[u,g]=p.useState(!1),{currentWallpaper:o,availableWallpapers:N,allWallpapers:b,rotationEnabled:w,rotationInterval:j,setRotationEnabled:x,setRotationInterval:v,nextWallpaper:n,selectWallpaper:m}=t,C=[{value:15e3,label:"15 seg"},{value:3e4,label:"30 seg"},{value:6e4,label:"1 min"},{value:12e4,label:"2 min"},{value:3e5,label:"5 min"}],z=f=>{if(f.premium&&!l()){c();return}m(f.id),g(!1)},T=()=>{c()};return a("div",{className:`wallpaper-controls ${r?"desktop-mode":""}`,children:[a("div",{className:"wallpaper-controls-header",children:[a("div",{className:"header-content",children:[e("h3",{children:"🎨 Fondos de ambientes"}),a("div",{className:"emotional-state-badge",children:["Modo ",((A=xe[s])==null?void 0:A.name)||s]})]}),i&&e("button",{className:"close-btn",onClick:i,children:"×"})]}),a("div",{className:"current-wallpaper-info",children:[a("div",{className:"wallpaper-preview",children:[(o==null?void 0:o.type)==="image"&&e("img",{src:o==null?void 0:o.url,alt:o==null?void 0:o.name,className:"preview-image"}),(o==null?void 0:o.type)==="video"&&e("video",{src:o==null?void 0:o.url,title:o==null?void 0:o.name,className:"preview-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:"Tu navegador no soporta el tag de video."}),!o&&e("div",{className:"no-wallpaper-placeholder",children:"No wallpaper selected"})]}),a("div",{className:"wallpaper-details",children:[e("h4",{children:(o==null?void 0:o.name)||"No wallpaper selected"}),a("p",{className:"wallpaper-type",children:[(o==null?void 0:o.type)==="image"&&"📸 Imagen",(o==null?void 0:o.type)==="video"&&"🎬 Video",!(o!=null&&o.type)&&"❔ Tipo desconocido",(o==null?void 0:o.premium)&&e("span",{className:"premium-badge",children:"👑 Premium"})]})]})]}),l()?a("div",{className:"premium-controls",children:[a("div",{className:"control-section",children:[e("h4",{children:"🔄 Auto rotacion"}),a("div",{className:"rotation-toggle",children:[e("span",{className:"rotation-toggle-label",children:w?"Auto Rotacion activada":"Auto Rotacion desactivada"}),a("label",{className:"toggle-switch",children:[e("input",{type:"checkbox",checked:w,onChange:f=>x(f.target.checked)}),e("span",{className:"toggle-slider"})]})]}),w&&a("div",{className:"rotation-interval",children:[e("label",{children:"Cambiar cada:"}),e("select",{value:j,onChange:f=>v(Number(f.target.value)),className:"interval-select",children:C.map(f=>e("option",{value:f.value,children:f.label},f.value))})]})]}),a("div",{className:"control-section",children:[e("h4",{children:"🎯 Control manual"}),a("div",{className:"manual-controls",children:[e("button",{className:"control-btn next-btn",onClick:n,disabled:N.length<=1,children:"⏭️"}),e("button",{className:"control-btn gallery-btn",onClick:()=>g(!u),children:"🖼️"})]})]}),u&&a("div",{className:"wallpaper-gallery",children:[e("h4",{children:"🎨 Fondos disponibles"}),e("div",{className:"gallery-grid",children:b.map(f=>a("div",{className:`gallery-item ${(o==null?void 0:o.id)===f.id?"activo":""} ${f.premium&&!l()?"bloqueado":""}`,onClick:()=>z(f),children:[f.type==="image"&&e("img",{src:f.url,alt:f.name,className:"gallery-preview"}),f.type==="video"&&e("video",{src:f.url,alt:f.name,className:"gallery-preview video-thumbnail-placeholder",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata",children:"Tu navegador no soporta la etiqueta de video."}),a("div",{className:"gallery-overlay",children:[e("span",{className:"wallpaper-name",children:f.name}),f.premium&&e("span",{className:"premium-badge",children:"👑"}),f.premium&&!l()&&e("div",{className:"lock-overlay",children:"🔒"})]})]},f.id))})]})]}):e("div",{className:"upgrade-prompt",children:a("div",{className:"upgrade-content",children:[e("h4",{children:"🔒 Control de fondos premium"}),e("p",{children:"Desbloquea funciones avanzadas de fondo de pantalla:"}),a("ul",{children:[e("li",{children:"🎨 Acceso a fondos de pantalla con imágenes premium"}),e("li",{children:"🔄 Controlar la configuración de rotación automática"}),e("li",{children:"🎯 Selección manual de fondo de pantalla"}),e("li",{children:"🖼️ Explora la galería completa de fondos de pantalla"})]}),e("button",{className:"upgrade-btn",onClick:T,children:"👑 Mejora a Premium"})]})}),a("div",{className:"wallpaper-stats",children:[a("div",{className:"stat",children:[e("span",{className:"stat-label",children:"Disponible:"}),e("span",{className:"stat-value",children:N.length})]}),a("div",{className:"stat",children:[e("span",{className:"stat-label",children:"Premium:"}),e("span",{className:"stat-value",children:b.filter(f=>f.premium).length})]}),a("div",{className:"stat",children:[e("span",{className:"stat-label",children:"tipo:"}),e("span",{className:"stat-value",children:(o==null?void 0:o.type)==="image"?"Imagen":(o==null?void 0:o.type)==="video"?"Video":"N/A"})]})]})]})};var ce={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},K=L.createContext&&L.createContext(ce),je=["attr","size","title"];function Ce(t,s){if(t==null)return{};var i=Se(t,s),r,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(l=0;l<c.length;l++)r=c[l],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Se(t,s){if(t==null)return{};var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;i[r]=t[r]}return i}function U(){return U=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},U.apply(this,arguments)}function Z(t,s){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,r)}return i}function V(t){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?Z(Object(i),!0).forEach(function(r){Ee(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Ee(t,s,i){return s=Pe(s),s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t}function Pe(t){var s=De(t,"string");return typeof s=="symbol"?s:s+""}function De(t,s){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,s);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function de(t){return t&&t.map((s,i)=>L.createElement(s.tag,V({key:i},s.attr),de(s.child)))}function G(t){return s=>L.createElement(ze,U({attr:V({},t.attr)},s),de(t.child))}function ze(t){var s=i=>{var{attr:r,size:l,title:c}=t,u=Ce(t,je),g=l||i.size||"1em",o;return i.className&&(o=i.className),t.className&&(o=(o?o+" ":"")+t.className),L.createElement("svg",U({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,r,u,{className:o,style:V(V({color:t.color||i.color},i.style),t.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),c&&L.createElement("title",null,c),t.children)};return K!==void 0?L.createElement(K.Consumer,null,i=>s(i)):s(ce)}function Q(t){return G({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function Te(t){return G({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function ee(t){return G({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Me(t){return G({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function ae(t){return G({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const te="cozy-notes",Oe=({onClose:t})=>{const[s,i]=p.useState(()=>{const n=localStorage.getItem(te);return n?JSON.parse(n):[{id:1,title:"Nota de ejemplo",content:"Esta es una nota de ejemplo. ¡Pruébala!",updatedAt:new Date().toISOString()}]}),[r,l]=p.useState(!1),[c,u]=p.useState(null),[g,o]=p.useState({title:"",content:""}),[N,b]=p.useState(!1),w=()=>Math.max(0,...s.map(n=>n.id))+1;p.useEffect(()=>{localStorage.setItem(te,JSON.stringify(s))},[s]);const j=()=>{if(!g.title.trim())return;const m=[{id:w(),title:g.title.trim(),content:g.content.trim(),updatedAt:new Date().toISOString()},...s];i(m),o({title:"",content:""}),b(!1)},x=n=>{if(!n.title.trim())return;const m=s.map(C=>C.id===n.id?{...n,title:n.title.trim(),content:n.content.trim(),updatedAt:new Date().toISOString()}:C);i(m),u(null)},v=n=>{window.confirm("¿Estás seguro de que quieres eliminar esta nota?")&&(i(s.filter(m=>m.id!==n)),(c==null?void 0:c.id)===n&&u(null))};return a("div",{className:"notes-widget",children:[a("div",{className:"widget-header",children:[e("h3",{children:"Mis Notas"}),a("div",{className:"widget-actions",children:[a("button",{className:"add-note-button",onClick:()=>b(!0),children:[e(ee,{})," Nueva nota"]}),e("button",{className:"close-button",onClick:t,children:"×"})]})]}),e("div",{className:"notes-content",children:r?e("div",{className:"loading",children:"Cargando..."}):a("div",{className:"notes-content-inner",children:[N&&e("div",{className:"note-form-container",children:a("div",{className:"note-form",children:[e("input",{type:"text",className:"note-title-input",placeholder:"Título de la nota",value:g.title,onChange:n=>o({...g,title:n.target.value}),autoFocus:!0}),e("textarea",{className:"note-content-input",placeholder:"Escribe tu nota aquí...",value:g.content,onChange:n=>o({...g,content:n.target.value}),rows:"4"}),a("div",{className:"form-actions",children:[a("button",{className:"cancel-button",onClick:()=>{b(!1),o({title:"",content:""})},children:[e(ae,{})," Cancelar"]}),a("button",{className:"save-button",onClick:j,disabled:!g.title.trim(),children:[e(Q,{})," Guardar"]})]})]})}),!N&&s.length===0&&a("div",{className:"empty-notes",children:[e("p",{children:"No hay notas aún"}),a("button",{className:"add-note-button",onClick:()=>b(!0),children:[e(ee,{})," Crear mi primera nota"]})]}),!N&&s.length>0&&e("div",{className:"notes-list",children:e("div",{className:"notes-grid",children:s.map(n=>e("div",{className:"note-card",children:(c==null?void 0:c.id)===n.id?a("div",{className:"note-edit-form",children:[e("input",{type:"text",className:"note-title-input",value:c.title,onChange:m=>u({...c,title:m.target.value}),placeholder:"Título",autoFocus:!0}),e("textarea",{className:"note-content-input",value:c.content,onChange:m=>u({...c,content:m.target.value}),placeholder:"Contenido de la nota",rows:"3"}),a("div",{className:"note-actions",children:[a("button",{className:"save-button",onClick:()=>x(c),disabled:!c.title.trim(),children:[e(Q,{})," Guardar"]}),a("button",{className:"cancel-button",onClick:()=>u(null),children:[e(ae,{})," Cancelar"]})]})]}):a(se,{children:[a("div",{className:"note-header",children:[e("h4",{className:"note-title",children:n.title}),a("div",{className:"note-actions",children:[e("button",{className:"icon-button",onClick:m=>{m.stopPropagation(),u({...n})},title:"Editar nota",children:e(Te,{})}),e("button",{className:"icon-button danger",onClick:m=>{m.stopPropagation(),v(n.id)},title:"Eliminar nota",children:e(Me,{})})]})]}),e("div",{className:"note-content",children:n.content||e("span",{className:"empty-content",children:"Sin contenido"})}),e("div",{className:"note-footer",children:e("span",{className:"note-date",children:new Date(n.updatedAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})})]})},n.id))})})]})})]})},Ae=({desktopId:t,onClose:s,isDesktopMode:i=!1})=>{const{user:r}=oe(),{canCreateMore:l,getLimit:c,getRemainingCount:u,isPremium:g,upgradeToPremium:o}=W(),[N,b]=p.useState([]),[w,j]=p.useState(""),[x,v]=p.useState(null),[n,m]=p.useState(""),[C,z]=p.useState(!0);p.useEffect(()=>{T()},[t]);const T=async()=>{try{const{data:h,error:S}=await pe(t);if(S)throw S;b(h||[])}catch{}finally{z(!1)}},A=async h=>{if(h.preventDefault(),!!w.trim()){if(!l("tasks",N.length)){alert(`Free plan is limited to ${c("tasks")} tasks. Upgrade to Premium for unlimited tasks!`);return}try{const S={user_id:r.id,desktop_id:t,title:w.trim(),is_completed:!1},{data:P,error:O}=await he(S);if(P){const F=Array.isArray(P)?P[0]:P;F&&F.id?b(X=>[F,...X]):await T()}else await T();j("")}catch{}}},f=async h=>{try{const{data:S,error:P}=await J(h.id,{completed:!h.completed});if(P)throw P;b(O=>O.map(F=>F.id===h.id?{...F,completed:!h.completed}:F))}catch{}},M=h=>{v(h.id),m(h.title)},E=async()=>{if(n.trim())try{const{data:h,error:S}=await J(x,{title:n.trim()});if(S)throw S;b(P=>P.map(O=>O.id===x?{...O,title:n.trim()}:O)),v(null),m("")}catch{}},I=async h=>{try{const{error:S}=await ge(h);if(S)throw S;b(P=>P.filter(O=>O.id!==h))}catch{}},_=()=>{v(null),m("")},R=N.filter(h=>h.completed),$=N.filter(h=>!h.completed);return a("div",{className:`widget tasks-widget ${i?"desktop-mode":""}`,children:[!i&&a("div",{className:"widget-header",children:[e("h3",{className:"widget-title",children:"✅ Tareas"}),e("div",{className:"task-stats",children:N.length>0&&a("span",{className:"stats-text",children:[R.length,"/",N.length," completado"]})}),e("button",{className:"widget-close",onClick:s,children:"×"})]}),a("div",{className:"widget-content",children:[a("form",{className:"add-task-form",onSubmit:A,children:[e("input",{type:"text",value:w,onChange:h=>j(h.target.value),placeholder:"Añadir una nueva tarea...",className:"task-input",disabled:!l("tasks",N.length)}),e("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:!l("tasks",N.length),children:"añadir tarea"})]}),a("div",{className:"subscription-status",children:[a("span",{className:"task-count",children:[N.length,"/",g()?"∞":c("tasks")," tareas"]}),!g()&&!l("tasks",N.length)&&a("div",{className:"limit-reached",children:[e("span",{children:"Limite alcanzado"}),e("button",{className:"upgrade-link",onClick:o,children:"Mejorar a premium"})]})]}),e("div",{className:"tasks-list",children:C?a("div",{className:"widget-loading",children:[e("div",{className:"loading-spinner"}),e("p",{children:"Cargando tareas..."})]}):N.length===0?e("div",{className:"empty-state",children:e("p",{children:"No hay tareas. Añade tu primera tarea!"})}):a(se,{children:[$.length>0&&a("div",{className:"task-section",children:[e("h4",{className:"section-title",children:"Para hacer"}),$.map(h=>e("div",{className:"task-item",children:x===h.id?a("div",{className:"task-edit",children:[e("input",{type:"text",value:n,onChange:S=>m(S.target.value),className:"task-edit-input"}),a("div",{className:"task-edit-actions",children:[e("button",{className:"btn btn-primary btn-xs",onClick:E,children:"Guardar"}),e("button",{className:"btn btn-secondary btn-xs",onClick:_,children:"Cancelar"})]})]}):a("div",{className:"task-content",children:[a("div",{className:"task-main",children:[e("input",{type:"checkbox",checked:h.completed,onChange:()=>f(h),className:"task-checkbox"}),e("span",{className:`task-text ${h.completed?"completed":""}`,children:h.title})]}),a("div",{className:"task-actions",children:[e("button",{className:"task-action-btn",onClick:()=>M(h),title:"Editar tarea",children:"✏️"}),e("button",{className:"task-action-btn delete",onClick:()=>I(h.id),title:"Eliminar tarea",children:"🗑️"})]})]})},h.id))]}),R.length>0&&a("div",{className:"task-section completed-section",children:[e("h4",{className:"section-title",children:"Completado"}),R.map(h=>e("div",{className:"task-item completed",children:a("div",{className:"task-content",children:[a("div",{className:"task-main",children:[e("input",{type:"checkbox",checked:h.completed,onChange:()=>f(h),className:"task-checkbox"}),e("span",{className:"task-text completed",children:h.title})]}),e("div",{className:"task-actions",children:e("button",{className:"task-action-btn delete",onClick:()=>I(h.id),title:"Eliminar tarea",children:"🗑️"})})]})},h.id))]})]})})]})]})},Fe=({onClose:t,isDesktopMode:s=!1})=>{const[i,r]=p.useState(1500),[l,c]=p.useState(!1),[u,g]=p.useState("work"),[o,N]=p.useState(0),b=p.useRef(null),w=25*60,j=5*60,x=15*60;p.useEffect(()=>(l&&i>0?b.current=setInterval(()=>{r(E=>E-1)},1e3):i===0?v():clearInterval(b.current),()=>clearInterval(b.current)),[l,i]);const v=()=>{if(c(!1),"Notification"in window&&Notification.permission==="granted"&&new Notification(`${u==="work"?"Trabajo":"descanso"} completado!`,{body:u==="work"?"Tiempo de descansar!":"listo para seguir trabajando?",icon:"/favicon.ico"}),u==="work"){N(I=>I+1);const E=(o+1)%4===0;g("break"),r(E?x:j)}else g("work"),r(w)},n=()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),c(!0)},m=()=>{c(!1)},C=()=>{c(!1),r(u==="work"?w:u==="break"&&o%4===0?x:j)},z=()=>{r(0)},T=E=>{const I=Math.floor(E/60),_=E%60;return`${I.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`},A=()=>{const E=u==="work"?w:o%4===0?x:j;return(E-i)/E*100},M=(()=>{if(u==="work")return{title:"Pomodoro",emoji:"🎯",color:"#4A90E2"};{const E=o%4===0;return{title:E?"largo descanso":"Breve descanso",emoji:E?"😌":"☕",color:E?"#7ED321":"#FF6B35"}}})();return a("div",{className:`widget pomodoro-widget ${s?"desktop-mode":""}`,children:[!s&&a("div",{className:"widget-header",children:[e("h3",{className:"widget-title",children:"⏰ Temporizador Pomodoro"}),e("button",{className:"widget-close",onClick:t,children:"×"})]}),e("div",{className:"widget-content",children:a("div",{className:"pomodoro-container",children:[a("div",{className:"session-info",children:[e("div",{className:"session-emoji",children:M.emoji}),e("h4",{className:"session-title",children:M.title}),a("div",{className:"session-stats",children:[a("span",{children:["Sesion ",o+1]}),o>0&&a("span",{children:[" • ",o," completado"]})]})]}),e("div",{className:"timer-display",children:a("div",{className:"timer-circle",children:[a("svg",{className:"progress-ring",width:"100",height:"100",children:[e("circle",{className:"progress-ring-background",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"4",fill:"transparent",r:"42",cx:"50",cy:"50"}),e("circle",{className:"progress-ring-progress",stroke:M.color,strokeWidth:"4",fill:"transparent",r:"42",cx:"50",cy:"50",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:`${2*Math.PI*42*(1-A()/100)}`,transform:"rotate(-90 50 50)"})]}),a("div",{className:"timer-text",children:[e("div",{className:"time-display",children:T(i)}),e("div",{className:"time-label",children:u==="work"?"Concentrado":"Descanso"})]})]})}),a("div",{className:"timer-controls",children:[l?e("button",{className:"control-btn",onClick:m,children:"⏸️"}):e("button",{className:"control-btn primary",onClick:n,children:"▶️"}),e("button",{className:"control-btn",onClick:C,children:"🔄"}),e("button",{className:"control-btn",onClick:z,children:"⏭️"})]}),e("div",{className:"pomodoro-info",children:a("div",{className:"info-compact",children:[e("span",{className:"info-item",children:"Trabajo: 25m"}),e("span",{className:"info-item",children:"Descanso: 5m"}),e("span",{className:"info-item",children:"Largo: 15m"})]})})]})})]})},Ie=()=>e("div",{className:"music-player",children:a("div",{className:"music-player-message",children:[e("h3",{children:"¡Próximamente!"}),e("p",{children:"Estamos trabajando en el reproductor de música para ofrecerte la mejor experiencia."}),e("p",{children:"Muy pronto podrás disfrutar de listas de reproducción personalizadas según tu estado de ánimo."})]})}),ie=[{id:"happy",name:"Feliz",emoji:"😊",color:"#FFD700"},{id:"focused",name:"Concentrado",emoji:"🎯",color:"#4A90E2"},{id:"relaxed",name:"Relajado",emoji:"😌",color:"#7ED321"},{id:"energetic",name:"Energetico",emoji:"⚡",color:"#FF6B35"},{id:"creative",name:"Creativo",emoji:"🎨",color:"#9013FE"},{id:"calm",name:"Calmado",emoji:"🧘",color:"#50E3C2"}],qe=[{id:"ambient",name:"Ambiente",description:"Sonidos atmosféricos de fondo"},{id:"upbeat",name:"Optimista",description:"Música enérgica y motivadora"},{id:"calm",name:"Calma",description:"Melodías tranquilas y relajantes"},{id:"focus",name:"Enfocar",description:"Sonidos que mejoran la concentración"}],Le=({desktop:t,onClose:s,onUpdate:i,isDesktopMode:r=!1})=>{const[l,c]=p.useState({name:t.name||"",emotional_state:t.emotional_state||"focused",theme_color:t.theme_color||"#4A90E2",music_type:t.music_type||"ambient"}),[u,g]=p.useState(!1),[o,N]=p.useState(""),b=(n,m)=>{c(C=>({...C,[n]:m}))},w=n=>{c(m=>({...m,emotional_state:n.id,theme_color:n.color}))},j=async()=>{if(!l.name.trim()){N("El nombre del escritorio es obligatorio");return}g(!0),N("");try{const{error:n}=await ve(t.id,l);if(n)throw n;i(),s()}catch(n){N("No se pudo actualizar el escritorio: "+n.message)}finally{g(!1)}},x=async()=>{if(confirm("¿Estás seguro de que deseas eliminar este escritorio? Esta acción no se puede deshacer.")){g(!0),N("");try{const{error:n}=await fe(t.id);if(n)throw n;i(),s()}catch(n){N("No se pudo eliminar el escritorio:"+n.message)}finally{g(!1)}}},v=ie.find(n=>n.id===l.emotional_state);return e("div",{className:`desktop-settings-overlay ${r?"desktop-mode":""}`,children:a("div",{className:"desktop-settings-modal",children:[!r&&a("div",{className:"modal-header",children:[e("h2",{children:"Configuracion de escriotrio"}),e("button",{className:"close-btn",onClick:s,children:"×"})]}),a("div",{className:"settings-form",children:[a("div",{className:"form-group",children:[e("label",{className:"form-label",children:"Nombre de escritorio"}),e("input",{type:"text",value:l.name,onChange:n=>b("name",n.target.value),className:"form-input",placeholder:"Enter desktop name",disabled:u})]}),a("div",{className:"form-group",children:[e("label",{className:"form-label",children:"Estado emocional"}),e("div",{className:"emotional-states-grid",children:ie.map(n=>a("div",{className:`state-option ${l.emotional_state===n.id?"selected":""}`,onClick:()=>w(n),children:[e("div",{className:"state-emoji",children:n.emoji}),e("span",{className:"state-name",children:n.name})]},n.id))})]}),a("div",{className:"form-group",children:[e("label",{className:"form-label",children:"Color del tema"}),a("div",{className:"color-picker",children:[e("input",{type:"color",value:l.theme_color,onChange:n=>b("theme_color",n.target.value),className:"color-input",disabled:u}),e("span",{className:"color-value",children:l.theme_color})]})]}),a("div",{className:"form-group",children:[e("label",{className:"form-label",children:"Tipo de musica"}),e("div",{className:"music-types",children:qe.map(n=>a("div",{className:`music-option ${l.music_type===n.id?"selected":""}`,onClick:()=>b("music_type",n.id),children:[e("div",{className:"music-name",children:n.name}),e("div",{className:"music-description",children:n.description})]},n.id))})]}),a("div",{className:"preview-section",children:[e("h4",{className:"preview-title",children:"Vista previa"}),e("div",{className:"desktop-preview",style:{backgroundColor:l.theme_color+"20"},children:a("div",{className:"preview-content",children:[e("span",{className:"preview-emoji",children:v==null?void 0:v.emoji}),a("div",{className:"preview-info",children:[e("div",{className:"preview-name",children:l.name}),e("div",{className:"preview-state",children:v==null?void 0:v.name})]})]})})]}),a("div",{className:"settings-actions",children:[e("button",{className:"btn btn-primary",onClick:j,disabled:u||!l.name.trim(),children:u?"Guardando...":"Guardar cambios"}),e("button",{className:"btn btn-secondary",onClick:s,disabled:u,children:e(Cancelar,{})}),e("button",{className:"btn btn-danger",onClick:x,disabled:u,children:"Eliminar escriotrio"})]})]})]})})},_e=({emotionalState:t,onClose:s,isDesktopMode:i=!1})=>{const{isPremium:r}=W(),l=re(t);return a("div",{className:`wallpaper-widget ${i?"desktop-mode":""}`,children:[a("div",{className:"widget-header",children:[e("h3",{className:"widget-title",children:"🎨 Fondo de ambientes"}),s&&e("button",{className:"widget-close",onClick:s,children:"×"})]}),a("div",{className:"widget-content",children:[e(le,{wallpaperSystem:l,emotionalState:t,onClose:s,isDesktopMode:i}),a("div",{className:"wallpaper-info-section",children:[a("div",{className:"info-card",children:[e("h4",{children:"🌟 Fondos ambientales"}),e("p",{children:"Cada estado emocional cuenta con ambientes de fondo cuidadosamente seleccionados que mejoran tu estado de ánimo y productividad. Los fondos rotan automáticamente para mantener tu espacio de trabajo fresco e inspirador."})]}),a("div",{className:"features-list",children:[a("div",{className:"feature-item",children:[e("span",{className:"feature-icon",children:"🔄"}),e("span",{children:"Fondos que giran automáticamente"})]}),a("div",{className:"feature-item",children:[e("span",{className:"feature-icon",children:"🎯"}),e("span",{children:"Ambientes que combinan con las emociones"})]}),a("div",{className:"feature-item",children:[e("span",{className:"feature-icon",children:"⚙️"}),e("span",{children:"Intervalos personalizables"})]}),a("div",{className:"feature-item premium",children:[e("span",{className:"feature-icon",children:"👑"}),e("span",{children:"Fondos exclusivos premium"})]})]})]})]})]})},$e=({widget:t,onClose:s,onMinimize:i,onMove:r,desktopId:l,onUpdate:c})=>{const[u,g]=p.useState(!1),[o,N]=p.useState({x:0,y:0}),b=p.useRef(null),w=m=>{if(m.target.closest(".widget-titlebar")&&!m.target.closest(".widget-controls")){g(!0);const C=b.current.getBoundingClientRect();N({x:m.clientX-C.left,y:m.clientY-C.top})}},j=m=>{if(u){const C=m.clientX-o.x,z=m.clientY-o.y,T=window.innerWidth-t.width,A=window.innerHeight-t.height-100,f=Math.max(0,Math.min(C,T)),M=Math.max(0,Math.min(z,A));r(f,M)}},x=()=>{g(!1)};p.useEffect(()=>{if(u)return document.addEventListener("mousemove",j),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",x)}},[u,o]);const v=()=>{switch(t.type){case"notes":return e(Oe,{desktopId:l,onClose:s,isDesktopMode:!0});case"tasks":return e(Ae,{desktopId:l,onClose:s,isDesktopMode:!0});case"pomodoro":return e(Fe,{onClose:s,isDesktopMode:!0});case"settings":return e(Le,{desktop:{id:l},onClose:s,onUpdate:c,isDesktopMode:!0});case"music":return e(Ie,{emotionalState:"happy",musicType:"ambient",isDesktopMode:!0});case"wallpaper":return e(_e,{emotionalState:t.emotionalState||"happy",onClose:s,isDesktopMode:!0});default:return e("div",{children:"Tipo de pestaña desconocida"})}},n=()=>{switch(t.type){case"notes":return"📝 Notas";case"tasks":return"✅ Tareas";case"pomodoro":return"⏰ Pomodoro";case"settings":return"⚙️ Configuración";case"music":return"🎵 Musica";case"wallpaper":return"🎨 Fondo de ambientes";default:return"Widget"}};return a("div",{ref:b,className:`desktop-widget ${u?"arrastrando":""}`,style:{position:"absolute",left:t.x,top:t.y,width:t.width,height:t.height,zIndex:t.zIndex,cursor:u?"arrastrando":"por defecto"},onMouseDown:w,children:[a("div",{className:"widget-titlebar",children:[e("div",{className:"widget-title",children:n()}),e("div",{className:"widget-controls",children:e("button",{className:"widget-control-btn close-btn",onClick:m=>{m.stopPropagation(),s()},title:"Cerrar",children:"×"})})]}),e("div",{className:"widget-content",children:v()})]})},We=()=>{const[t,s]=p.useState(new Date);p.useEffect(()=>{const c=setInterval(()=>{s(new Date)},1e3);return()=>clearInterval(c)},[]);const i=c=>c.toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),r=c=>c.toLocaleDateString("es-AR",{weekday:"long"}),l=c=>c.toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"});return a("div",{className:"clock-widget",children:[e("div",{className:"clock-time",children:i(t)}),e("div",{className:"clock-day",children:r(t)}),e("div",{className:"clock-date",children:l(t)})]})},ne={happy:{name:"Feliz",emoji:"😊",color:"#FFD700"},focused:{name:"Concentrado",emoji:"🎯",color:"#4A90E2"},relaxed:{name:"Relajado",emoji:"😌",color:"#7ED321"},energetic:{name:"Energetico",emoji:"⚡",color:"#FF6B35"},creative:{name:"Creativo",emoji:"🎨",color:"#9013FE"},calm:{name:"Calmado",emoji:"🧘",color:"#50E3C2"}},Ue=()=>{const[t,s]=p.useState([]),[i,r]=p.useState(null),[l,c]=p.useState([]),[u,g]=p.useState([]),[o,N]=p.useState(!0),[b,w]=p.useState(!1),[j,x]=p.useState(!1),[v,n]=p.useState(!1),[m,C]=p.useState(null),{user:z,signOut:T}=oe(),{canCreateMore:A,getLimit:f,isPremium:M,upgradeToPremium:E,downgradeToFree:I}=W(),_=Ne(),R=re((i==null?void 0:i.emotional_state)||"happy",C);p.useEffect(()=>{$()},[z]);const $=async()=>{if(z)try{const{data:d,error:y}=await be(z.id);if(y)throw y;s(d||[]);const k=(d==null?void 0:d.find(D=>D.is_default))||(d==null?void 0:d[0]);k&&r(k)}catch{}finally{N(!1)}},h=d=>{r(d),w(!1)},S=async()=>{try{await T(),_("/")}catch{}},P=d=>{const y=l.find(k=>k.type===d);if(y)g(k=>k.filter(D=>D!==y.id)),c(k=>k.map(D=>D.id===y.id?{...D,zIndex:Math.max(...k.map(q=>q.zIndex),0)+1}:D));else{const D=(B=>{switch(B){case"pomodoro":return{width:350,height:400};case"settings":return{width:500,height:600};case"music":return{width:400,height:300};default:return{width:400,height:350}}})(d),q={id:`${d}-${Date.now()}`,type:d,x:Math.random()*200+100,y:Math.random()*100+100,...D,zIndex:Math.max(...l.map(B=>B.zIndex),0)+1,isMinimized:!1};c(B=>[...B,q])}},O=d=>{c(y=>y.filter(k=>k.id!==d)),g(y=>y.filter(k=>k!==d))},F=d=>{g(y=>[...y,d])},X=d=>{g(y=>y.filter(k=>k!==d)),c(y=>y.map(k=>k.id===d?{...k,zIndex:Math.max(...y.map(D=>D.zIndex),0)+1}:k))},me=(d,y,k)=>{c(D=>D.map(q=>q.id===d?{...q,x:y,y:k}:q))},ue=()=>{if(m)return{minHeight:"100vh",width:"100%",position:"relative",backgroundColor:"black"};const d=ne[i.emotional_state];return d?{background:`linear-gradient(135deg, ${d.color}20 0%, ${d.color}10 100%)`,minHeight:"100vh",width:"100%"}:{}};if(o)return a("div",{className:"loading-container",children:[e("div",{className:"loading-spinner"}),e("p",{children:"Cargando su espacio de trabajo..."})]});if(!i)return e("div",{className:"dashboard-page",children:a("div",{className:"empty-state",children:[e("h2",{children:"No se encontró ningún espacio de trabajo"}),e("p",{children:"¡Creemos tu primer espacio de trabajo emocional!"}),e("button",{onClick:()=>_("/emotional-setup"),className:"btn btn-primary",children:"Crear espacio de trabajo"})]})});const Y=ne[i.emotional_state];return a("div",{className:"dashboard-page",style:ue(),children:[m&&m.type==="image"&&e("img",{src:m.url,alt:m.name,className:"dashboard-background-image"}),m&&m.type==="video"&&a("video",{className:"dashboard-background-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[e("source",{src:m.url,type:"video/mp4"}),"Tu navegador no soporta el tag de video."]},m.id),e(ye,{showLogo:!1,title:`${Y==null?void 0:Y.emoji} ${i.name}`}),e("div",{className:"floating-controls",children:a("div",{className:"floating-actions",children:[e("button",{className:"floating-btn plan-btn",onClick:()=>x(!0),title:M()?"Gestionar plan":"Actualizar a Premium",children:M()?"👑":"⬆️"}),e("button",{className:"floating-btn workspace-btn",onClick:()=>w(!0),title:"Administrar Escritorios",children:"🖥️"}),e("button",{className:"floating-btn wallpaper-btn",onClick:()=>n(!0),title:M()?"Configurar ambientes de fondo":"Actualice a Premium para controlar el fondo de pantalla",children:"🎨"}),e("button",{className:"floating-btn logout-btn",onClick:S,title:"Cerrar sesión",children:"🚪"})]})}),a("main",{className:"dashboard-main",children:[e("div",{className:"desktop-widgets",children:l.map(d=>u.includes(d.id)?null:e($e,{widget:d,onClose:()=>O(d.id),onMinimize:()=>F(d.id),onMove:(k,D)=>me(d.id,k,D),desktopId:i.id,onUpdate:$},d.id))}),e("div",{className:"desktop-taskbar",children:u.map(d=>{const y=l.find(k=>k.id===d);return y?a("button",{className:"taskbar-minimized-widget",onClick:()=>X(d),children:[y.type==="notes"&&"📝",y.type==="tasks"&&"✅",y.type==="pomodoro"&&"⏰",y.type==="settings"&&"⚙️",y.type==="music"&&"🎵",y.type.charAt(0).toUpperCase()+y.type.slice(1)]},d):null})}),a("div",{className:"floating-widget-launcher",children:[e("button",{className:`floating-widget-btn ${l.some(d=>d.type==="notes"&&!u.includes(d.id))?"active":""}`,onClick:()=>P("notes"),title:"Notas",children:"📝"}),e("button",{className:`floating-widget-btn ${l.some(d=>d.type==="tasks"&&!u.includes(d.id))?"active":""}`,onClick:()=>P("tasks"),title:"Tareas",children:"✅"}),e("button",{className:`floating-widget-btn ${l.some(d=>d.type==="pomodoro"&&!u.includes(d.id))?"active":""}`,onClick:()=>P("pomodoro"),title:"Pomodoro",children:"⏰"}),e("button",{className:`floating-widget-btn ${l.some(d=>d.type==="music"&&!u.includes(d.id))?"active":""}`,onClick:()=>P("music"),title:"Musica",children:"🎵"})]}),e(We,{})]}),b&&e("div",{className:"desktop-manager-overlay",children:a("div",{className:"desktop-manager-container",children:[e("button",{className:"close-desktop-manager",onClick:()=>w(!1),children:"×"}),e(ke,{onDesktopSelect:h,currentDesktop:i,onDesktopUpdate:$})]})}),j&&e("div",{className:"plan-selector-overlay",children:a("div",{className:"plan-selector-container",children:[e("button",{className:"close-plan-selector",onClick:()=>x(!1),children:"×"}),e(we,{})]})}),v&&e("div",{className:"wallpaper-config-overlay",children:e("div",{className:"wallpaper-config-container",children:e(le,{wallpaperSystem:R,emotionalState:(i==null?void 0:i.emotional_state)||"happy",onClose:()=>n(!1),isDesktopMode:!1})})})]})};export{Ue as default};
//# sourceMappingURL=DashboardPage-ByyhEes7.js.map
